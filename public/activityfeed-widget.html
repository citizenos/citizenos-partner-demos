<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CitizenOS Partner Demos - Activity Feed Widget</title>
    <link rel="stylesheet" type="text/css" href="/styles/default.css">
    <style>
        iframe {
            border: 5px solid green;
            width: 100%;
            height: 800px;
        }
    </style>
    <script src="https://citizenos-citizenosfe-web-test.herokuapp.com/js/widgets.js"></script>
    <!--script src="https://dev.citizenos.com:3001/js/widgets.js"></script-->
    <script>
        // NB! Very important to invoke the widget constructors inside vanilla 'DOMContentLoaded' or  $(document).ready() in case of JQUERY
        document.addEventListener('DOMContentLoaded', function () {
            // Load with Partner entity ID and Partner ID
            // Load inside your own element with id 'myCitizenOSActivityWidgetElementId1'.
            var activityWidget1 = window.CITIZENOS.widgets.ActivityFeed('et', 14801, '0c580018-ed74-42cb-b0e4-8df654ddd42c', 'myCitizenOSActivityWidgetElementId1');
            // Your own click handler
            activityWidget1.addEventListener('citizenos.widget.click', function (e) {
                console.log('activityWidget1', 'citizenos.widget.click', e.detail.topic, e.detail.topic.sourcePartnerObjectId);
                //window.location.href = '/?p=' + encodeURIComponent(e.detail.topic.sourcePartnerObjectId);
            });
            // Load with Partner ID to get the feed of all Partner Topics
            var activityWidget2 = window.CITIZENOS.widgets.ActivityFeed('ru', null, '0c580018-ed74-42cb-b0e4-8df654ddd42c', 'myCitizenOSActivityWidgetElementId2');
            // Your own click handler
            activityWidget2.addEventListener('citizenos.widget.click', function (e) {
                console.log('activityWidget2', 'citizenos.widget.click', e.detail.topic, e.detail.topic.sourcePartnerObjectId);
            });
            // Load the feed of all public Topics in CitizenOS
            // Load as a last element in body with id auto generated
            var activityWidget3 = window.CITIZENOS.widgets.ActivityFeed('en');
            // Your own click handler
            activityWidget3.addEventListener('citizenos.widget.click', function (e) {
                console.log('activityWidget3', 'citizenos.widget.click', e.detail.topic, e.detail.topic.sourcePartnerObjectId);
            });
        });
    </script>
</head>
<body>
    <h4>CitizenOS Partner Demos</h4>
    <h1>Activity Feed Widget</h1>
    <p>
        Widget for embedding CitizenOS activity feed into your webapp.
    </p>

    <h2>Example</h2>
    Add following script to your page:
    <pre>
        &lt;script src="https://citizenos-citizenosfe-web-test.herokuapp.com/js/widgets.js"&gt;&lt;/script&gt;
    </pre>
    Load the widget:
    <pre>
        // NB! Very important to invoke the widget constructors inside vanilla 'DOMContentLoaded' or  $(document).ready() in case of JQUERY
        document.addEventListener('DOMContentLoaded', function () {
            // Load with Partner entity ID and Partner ID
            // Load inside your own element with id 'myCitizenOSActivityWidgetElementId1'.
            var activityWidget1 = window.CITIZENOS.widgets.ActivityFeed('et', 14801, '0c580018-ed74-42cb-b0e4-8df654ddd42c', 'myCitizenOSActivityWidgetElementId1');
            // Your own click handler
            activityWidget1.addEventListener('citizenos.widget.click', function (e) {
                console.log('activityWidget1', 'citizenos.widget.click', e.detail.topic, e.detail.topic.sourcePartnerObjectId);
                //window.location.href = '/?p=' + encodeURIComponent(e.detail.topic.sourcePartnerObjectId);
            });
            // Load with Partner ID to get the feed of all Partner Topics
            var activityWidget2 = window.CITIZENOS.widgets.ActivityFeed('ru', null, '0c580018-ed74-42cb-b0e4-8df654ddd42c', 'myCitizenOSActivityWidgetElementId2');
            // Your own click handler
            activityWidget2.addEventListener('citizenos.widget.click', function (e) {
                console.log('activityWidget2', 'citizenos.widget.click', e.detail.topic, e.detail.topic.sourcePartnerObjectId);
            });
            // Load the feed of all public Topics in CitizenOS
            // Load as a last element in body with id auto generated
            var activityWidget3 = window.CITIZENOS.widgets.ActivityFeed('en');
            // Your own click handler
            activityWidget3.addEventListener('citizenos.widget.click', function (e) {
                console.log('activityWidget3', 'citizenos.widget.click', e.detail.topic, e.detail.topic.sourcePartnerObjectId);
            });
        });
    </pre>
    Widget wrapper element configuration:
    <ul>
        <li><b>data-height</b> - specify height for the iframe inside your own widget wrapper element. Value can be in any valid CSS height and one special value "auto" which resizes the wrapper to
            frame size. Default: auto
        </li>
    </ul>
    <p>
        <b>NOTE:</b> Everything inside <span style="color:green; border: 3px solid green;">green</span> is served by CitizenOS
    </p>
    <div id="myCitizenOSActivityWidgetElementId1" data-height="100%" style="width:50%; float: left; height: 600px;"></div>
    <div id="myCitizenOSActivityWidgetElementId2" data-height="600px" style="width:300px; float: left; background: lightgray;"></div>
</body>
</html>